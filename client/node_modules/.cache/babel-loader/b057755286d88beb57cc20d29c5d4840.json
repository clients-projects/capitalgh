{"ast":null,"code":"import _objectSpread from \"/home/niscolinx/projects/fxcrypto/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"/home/niscolinx/projects/fxcrypto/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/niscolinx/projects/fxcrypto/client/src/main/auth/Login.js\";\nimport React, { useState, useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport Particles from 'react-tsparticles';\nimport { Link } from 'react-router-dom';\nimport * as orderAction from '../../store/actions/burgerIndex';\nimport Button from '../Button';\nimport Input from '../Input';\nimport { required, length, email } from '../../util/validators';\nimport Auth from './Auth';\n\nconst Login = props => {\n  const _useState = useState({\n    loginForm: {\n      email: {\n        value: '',\n        valid: false,\n        touched: false,\n        validators: [required, email]\n      },\n      password: {\n        value: '',\n        valid: false,\n        touched: false,\n        validators: [required, length({\n          min: 6\n        })]\n      },\n      formIsValid: false\n    }\n  }),\n        _useState2 = _slicedToArray(_useState, 2),\n        state = _useState2[0],\n        setState = _useState2[1];\n\n  const _useState3 = useState(null),\n        _useState4 = _slicedToArray(_useState3, 2),\n        message = _useState4[0],\n        setMessage = _useState4[1];\n\n  useEffect(() => {\n    if (props.err) {\n      setMessage({\n        error: props.err.page === 'login' ? props.err.error : null\n      });\n    } else if (props.tokenId) {\n      props.history.push('/admin/dashboard');\n      setMessage({\n        success: 'Success'\n      });\n    }\n  }, [props]);\n\n  const inputChangeHandler = (input, value) => {\n    setState(prevState => {\n      let isValid = true;\n\n      for (const validator of prevState.loginForm[input].validators) {\n        isValid = isValid && validator(value);\n      }\n\n      const updatedForm = _objectSpread({}, prevState.loginForm, {\n        [input]: _objectSpread({}, prevState.loginForm[input], {\n          valid: isValid,\n          value: value,\n          touched: true\n        })\n      });\n\n      let formIsValid = true;\n\n      for (const inputName in updatedForm) {\n        if (inputName !== 'formIsValid' && inputName !== '[object Object]') {\n          formIsValid = formIsValid && updatedForm[inputName].valid;\n        }\n      }\n\n      return {\n        loginForm: updatedForm,\n        formIsValid: formIsValid\n      };\n    });\n  };\n\n  const inputBlurHandler = input => {};\n\n  const handleLogin = e => {\n    e.preventDefault();\n\n    if (state.formIsValid) {\n      props.onInitLogin(state.loginForm.email.value, state.loginForm.password.value);\n    } else {\n      setMessage({\n        error: 'Wrong Input, please check your entries'\n      });\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Particles, {\n    className: \"particles\",\n    params: {\n      particles: {\n        number: {\n          value: 20\n        }\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Auth, {\n    login: true,\n    message: message,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleLogin,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Input, {\n    id: \"email\",\n    label: \"E-Mail\",\n    type: \"email\",\n    control: \"input\",\n    onChange: inputChangeHandler,\n    onBlur: inputBlurHandler.bind('email'),\n    value: state.loginForm['email'].value,\n    valid: state.loginForm['email'].valid,\n    touched: state.loginForm['email'].touched,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(Input, {\n    id: \"password\",\n    label: \"Password\",\n    type: \"password\",\n    control: \"input\",\n    minLength: 6,\n    onChange: inputChangeHandler,\n    onBlur: inputBlurHandler.bind('password'),\n    value: state.loginForm['password'].value,\n    valid: state.loginForm['password'].valid,\n    touched: state.loginForm['password'].touched,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-btn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    design: \"raised\",\n    type: \"submit\",\n    loading: props.loading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 25\n    }\n  }, props.loading ? 'Loading...' : 'Login'), /*#__PURE__*/React.createElement(Link, {\n    to: \"/forgot-password\",\n    className: \"form-btn__link\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 25\n    }\n  }, \"Forgot Password?\")))));\n};\n\nconst mapStateToProps = state => {\n  return {\n    loading: state.auth.loading,\n    // loading:false,\n    err: state.auth.error,\n    tokenId: state.auth.tokenId,\n    userId: state.auth.userId\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    onInitLogin: (email, password) => dispatch(orderAction.initLogin(email, password))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Login);","map":{"version":3,"sources":["/home/niscolinx/projects/fxcrypto/client/src/main/auth/Login.js"],"names":["React","useState","useEffect","connect","Particles","Link","orderAction","Button","Input","required","length","email","Auth","Login","props","loginForm","value","valid","touched","validators","password","min","formIsValid","state","setState","message","setMessage","err","error","page","tokenId","history","push","success","inputChangeHandler","input","prevState","isValid","validator","updatedForm","inputName","inputBlurHandler","handleLogin","e","preventDefault","onInitLogin","particles","number","bind","loading","mapStateToProps","auth","userId","mapDispatchToProps","dispatch","initLogin"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { connect } from 'react-redux'\nimport Particles from 'react-tsparticles'\nimport { Link } from 'react-router-dom'\n\nimport * as orderAction from '../../store/actions/burgerIndex'\n\nimport Button from '../Button'\nimport Input from '../Input'\n\nimport { required, length, email } from '../../util/validators'\nimport Auth from './Auth'\n\nconst Login = (props) => {\n    const [state, setState] = useState({\n        loginForm: {\n            email: {\n                value: '',\n                valid: false,\n                touched: false,\n                validators: [required, email],\n            },\n            password: {\n                value: '',\n                valid: false,\n                touched: false,\n                validators: [required, length({ min: 6 })],\n            },\n            formIsValid: false,\n        },\n    })\n\n    const [message, setMessage] = useState(null)\n\n    useEffect(() => {\n        if (props.err) {\n            setMessage({\n                error: props.err.page === 'login' ? props.err.error : null,\n            })\n        } else if (props.tokenId) {\n            props.history.push('/admin/dashboard')\n            setMessage({\n                success: 'Success',\n            })\n        }\n    }, [props])\n\n    const inputChangeHandler = (input, value) => {\n        setState((prevState) => {\n            let isValid = true\n            for (const validator of prevState.loginForm[input].validators) {\n                isValid = isValid && validator(value)\n            }\n\n            const updatedForm = {\n                ...prevState.loginForm,\n                [input]: {\n                    ...prevState.loginForm[input],\n                    valid: isValid,\n                    value: value,\n                    touched: true,\n                },\n            }\n            let formIsValid = true\n            for (const inputName in updatedForm) {\n                if (\n                    inputName !== 'formIsValid' &&\n                    inputName !== '[object Object]'\n                ) {\n                    formIsValid = formIsValid && updatedForm[inputName].valid\n                }\n            }\n            return {\n                loginForm: updatedForm,\n                formIsValid: formIsValid,\n            }\n        })\n    }\n\n    const inputBlurHandler = (input) => {}\n\n    const handleLogin = (e) => {\n        e.preventDefault()\n        if (state.formIsValid) {\n            props.onInitLogin(\n                state.loginForm.email.value,\n                state.loginForm.password.value\n            )\n        } else {\n            setMessage({ error: 'Wrong Input, please check your entries' })\n        }\n    }\n\n    return (\n        <>\n            <Particles\n                className='particles'\n                params={{\n                    particles: {\n                        number: {\n                            value: 20,\n                        },\n                    },\n                }}\n            />\n            <Auth login message={message}>\n                <form onSubmit={handleLogin}>\n                    <Input\n                        id='email'\n                        label='E-Mail'\n                        type='email'\n                        control='input'\n                        onChange={inputChangeHandler}\n                        onBlur={inputBlurHandler.bind('email')}\n                        value={state.loginForm['email'].value}\n                        valid={state.loginForm['email'].valid}\n                        touched={state.loginForm['email'].touched}\n                    />\n                    <Input\n                        id='password'\n                        label='Password'\n                        type='password'\n                        control='input'\n                        minLength={6}\n                        onChange={inputChangeHandler}\n                        onBlur={inputBlurHandler.bind('password')}\n                        value={state.loginForm['password'].value}\n                        valid={state.loginForm['password'].valid}\n                        touched={state.loginForm['password'].touched}\n                    />\n                    <div className='form-btn'>\n                        <Button\n                            design='raised'\n                            type='submit'\n                            loading={props.loading}\n                        >\n                            {props.loading ? 'Loading...' : 'Login'}\n                        </Button>\n                        <Link to='/forgot-password' className='form-btn__link'>\n                            Forgot Password?\n                        </Link>\n                    </div>\n                </form>\n            </Auth>\n        </>\n    )\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        loading: state.auth.loading,\n        // loading:false,\n        err: state.auth.error,\n        tokenId: state.auth.tokenId,\n        userId: state.auth.userId,\n    }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        onInitLogin: (email, password) =>\n            dispatch(orderAction.initLogin(email, password)),\n    }\n}\nexport default connect(mapStateToProps, mapDispatchToProps)(Login)\n"]},"metadata":{},"sourceType":"module"}